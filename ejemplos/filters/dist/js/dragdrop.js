function previewfile(e){if(tests.filereader===!0&&acceptedTypes[e.type]===!0){var r=new FileReader;r.onload=function(e){var r=new Image;r.src=e.target.result,r.width=250,holder.appendChild(r)},r.readAsDataURL(e)}else holder.innerHTML+="<p>Uploaded "+e.name+" "+(e.size?(e.size/1024|0)+"K":""),console.log(e)}function readfiles(e){for(var r=tests.formdata?new FormData:null,t=0;t<e.length;t++)tests.formdata&&r.append("file",e[t]),previewfile(e[t]);if(tests.formdata){var a=new XMLHttpRequest;a.open("POST","/devnull.php"),a.onload=function(){progress.value=progress.innerHTML=100},tests.progress&&(a.upload.onprogress=function(e){if(e.lengthComputable){var r=e.loaded/e.total*100|0;progress.value=progress.innerHTML=r}}),a.send(r)}}var holder=document.getElementById("holder"),tests={filereader:"undefined"!=typeof FileReader,dnd:"draggable"in document.createElement("span"),formdata:!!window.FormData,progress:"upload"in new XMLHttpRequest},support={filereader:document.getElementById("filereader"),formdata:document.getElementById("formdata"),progress:document.getElementById("progress")},acceptedTypes={"image/png":!0,"image/jpeg":!0,"image/gif":!0,"image/svg":!0},progress=document.getElementById("uploadprogress"),fileupload=document.getElementById("upload");"filereader formdata progress".split(" ").forEach(function(e){tests[e]===!1?support[e].className="fail":support[e].className="hidden"}),tests.dnd?(holder.ondragover=function(){return this.className="hover",!1},holder.ondragend=function(){return this.className="",!1},holder.ondrop=function(e){this.className="",e.preventDefault(),readfiles(e.dataTransfer.files)}):(fileupload.className="hidden",fileupload.querySelector("input").onchange=function(){readfiles(this.files)});